<div id="ajaxModule">
    <div>
        <div class="modal-backdrop in"></div>
        <div tabindex="-1" role="dialog" style="display:block;    background-color: transparent;    top: 10%;"
             class="modal in">
            <div class="modal-dialog">
                <div class="modal-content" style="overflow:hidden;">
                    <div class="modal-header">
                        {% if mode == "edit" and menu != None %}
                            修改菜单
                        {% else %}
                            新增菜单
                        {% endif %}
                        <button type="button" class="close" aria-hidden="true">×</button>
                        <h4 class="modal-title"></h4></div>
                    <div class="modal-body">
                        <form class="form-horizontal" method="post" id="formAjaxId" data-collabel="3"
                              data-parsley-validate>

                            <?php if ($edit): ?>
                            <input type="hidden" name="mode" value="<?= $mode; ?>"/>
                            <input type="hidden" name="menu_id" value="<?= $menu->menu_id; ?>"/>
                            <?php endif; ?>
                            <div class="form-group"><label
                                    class="col-lg-2 control-label">账户名</label>

                                <div class="col-lg-10">
                                    <input type="text"
                                           class="form-control"
                                           name="account_name"
                                           placeholder="请输入账户名" parsley-required="true"/>
                                </div>
                            </div>
                            <div class="form-group"><label
                                    class="col-lg-2 control-label">平台</label>

                                <div class="col-lg-10">
                                    <input type="text"
                                           class="form-control"
                                           name="platform"
                                           placeholder="请输入账户名" parsley-required="true"/>
                                </div>
                            </div>
                            <div class="form-group"><label for="inputName"
                                                           class="col-lg-2 control-label">平台类型</label>

                                <div class="col-lg-7">
                                    <select name="menu_level" class="form-control"
                                            type="select" parsley-required="true">
                                        {% for account_type in account_type_list %}
                                            <option value="{{ account_type.name }}">
                                                {{ account_type.id }}
                                            </option>
                                        {% endfor %}
                                    </select>
                                </div>
                                <div class="col-lg-3">
                                    <button class="pull-right btn btn-success" id="addAccountType" type="button">
                                        <i class="glyphicon glyphicon-plus"></i><span>新增类型</span></button>
                                </div>
                            </div>
                            <div class="form-group"><label
                                    class="col-lg-2 control-label">金额</label>

                                <div class="col-lg-10">

                                    <input type="text"
                                           class="form-control"
                                           name="menu_url"
                                           placeholder="请输入菜单地址"/>
                                </div>
                            </div>
                            <div class="form-group"><label
                                    class="col-lg-2 control-label">用途</label>

                                <div class="col-lg-10">
                                    <input type="text"
                                           class="form-control"
                                           name="menu_title"
                                           placeholder="请输入账户名" parsley-required="true"/>
                                </div>
                            </div>
                            <div class="form-group"><label
                                    class="col-lg-2 control-label">开始</label>

                                <div class="col-lg-10">
                                    <input type="text"
                                           class="form-control"
                                           name="menu_title"
                                           placeholder="请输入账户名" parsley-required="true"/>
                                </div>
                            </div>
                            <div class="form-group"><label
                                    class="col-lg-2 control-label">周期</label>

                                <div class="col-lg-10">
                                    <input type="text"
                                           class="form-control"
                                           name="menu_title"
                                           placeholder="请输入账户名" parsley-required="true"/>
                                </div>
                            </div>
                            <div class="form-group"><label
                                    class="col-lg-2 control-label">结束</label>

                                <div class="col-lg-10">
                                    <input type="text"
                                           class="form-control"
                                           name="menu_title"
                                           placeholder="请输入账户名" parsley-required="true"/>
                                </div>
                            </div>
                            <div class="form-group"><label
                                    class="col-lg-2 control-label">收益率</label>

                                <div class="col-lg-10">
                                    <input type="text"
                                           class="form-control"
                                           name="menu_title"
                                           placeholder="请输入账户名" parsley-required="true"/>
                                </div>
                            </div>
                            <div class="form-group"><label
                                    class="col-lg-2 control-label">备注</label>

                                <div class="col-lg-10">
                                    <input type="text"
                                           class="form-control"
                                           name="menu_title"
                                           placeholder="请输入账户名" parsley-required="true"/>
                                </div>
                            </div>

                            <div class="modal-footer">
                                <button type="button" class="btn btn-default closeBtn">关闭</button>
                                <button class="btn btn-primary btn btn-success" type="submit">保存</button>
                            </div>
                        </form>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">
    $("#ajaxModule button.close,#ajaxModule button.closeBtn").click(function () {
        $("#ajaxModule").fadeOut();
        $("#ajaxModule").remove();
    });

     $("#addAccountType").click(function () {
            $.ajax({
                url: '/ajax/add_acct_type/',
                success: function (e) {
                    $("body").append(e);
                }
            })
        });

    $("#ajaxModule form").submit(function (e) {
        e.preventDefault();
        if (!$(this).parsley('validate')) {
//            e.preventDefault();
        } else {
            $.ajax({
                url: $(this).attr("action"),
                type: "post",
                data: $(this).serialize(),
                success: function (e) {
                    $("#ajaxModule").fadeOut();
                    $("#ajaxModule").remove();
                }
            })
        }
    });


</script>